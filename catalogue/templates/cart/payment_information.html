{% comment %} <!-- Bilal Ma - /payment_information.htmlcart -->


<h1>Récapitulatif de la commande</h1>
<table class="table">
    <thead>
        <tr>
            <th scope="col">Spectacle</th>
            <th scope="col">Quantité</th>
            <th scope="col">Prix unitaire</th>
            <th scope="col">Prix total</th>
        </tr>
    </thead>
    <tbody>
        {% for item in cart_items %}
        <tr>
            <td>{{ item.title }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.price }} €</td>
            <td>{{ item.total_price }} €</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3">Total</td>
            <td>{{ total_price }} €</td>
        </tr>
    </tfoot>
</table>

    

<h1>Informations de paiement</h1>
{% url 'catalogue:checkout_summary' %}
<form method="post" action="{% url 'catalogue:make_payment' %}">
    {% csrf_token %}
    <h2>Choisissez votre méthode de paiement :</h2>
    <input type="radio" id="visa" name="payment_method" value="Visa">
    <label for="visa">Carte Visa</label><br>
    <input type="radio" id="maestro" name="payment_method" value="Maestro">
    <label for="maestro">Carte Maestro</label><br>
    <input type="radio" id="paypal" name="payment_method" value="Paypal">
    <label for="paypal">Paypal</label><br>
    <input type="radio" id="sur_place" name="payment_method" value="Sur place">
    <label for="sur_place">Paiement sur place</label><br>

    <div id="payment_form_visa" style="display: none;">
        <!-- Formulaire de paiement Visa -->
        <!-- Champs pour les informations de la carte Visa -->
        <input type="text" name="card_number" placeholder="Numéro de carte"><br>
        <input type="text" name="expiry_date" placeholder="Date d'expiration"><br>
        <input type="text" name="cvv" placeholder="CVV"><br>
    </div>

    <div id="payment_form_paypal" style="display: none;">
        <!-- Formulaire de paiement Paypal -->
        <!-- Champs pour les informations de compte Paypal -->
        <input type="email" name="paypal_email" placeholder="Adresse email Paypal"><br>
        <input type="password" name="paypal_password" placeholder="Mot de passe Paypal"><br>
    </div>

    <div id="payment_form_sur_place" style="display: none;">
        <!-- Formulaire pour le paiement sur place -->
        <input type="text" name="comment" placeholder="(facultatif)"><br>
    </div>

    <button type="submit" class="btn btn-primary">Payer</button>
</form>

<script>
    // Afficher le formulaire de paiement correspondant à la méthode choisie
    document.querySelectorAll('input[type=radio][name=payment_method]').forEach(function(input) {
        input.addEventListener('change', function() {
            var method = this.value;
            document.querySelectorAll('[id^=payment_form_]').forEach(function(form) {
                if (form.id === 'payment_form_' + method.toLowerCase().replace(' ', '_')) {
                    form.style.display = 'block';
                } else {
                    form.style.display = 'none';
                }
            });
        });
    });
</script>  {% endcomment %}



<h1>Informations de paiement</h1>
<form method="post" action="{% url 'catalogue:checkout_summary' %}">
    {% csrf_token %}
    <h2>Choisissez votre méthode de paiement :</h2>
    <input type="radio" id="visa" name="payment_method" value="Visa">
    <label for="visa">Carte Visa</label><br>
    <input type="radio" id="maestro" name="payment_method" value="Maestro">
    <label for="maestro">Carte Maestro</label><br>
    <input type="radio" id="paypal" name="payment_method" value="Paypal">
    <label for="paypal">Paypal</label><br>
    <input type="radio" id="sur_place" name="payment_method" value="Sur place">
    <label for="sur_place">Paiement sur place</label><br>

    <div id="payment_form_visa" style="display: none;">
        <!-- Formulaire de paiement Visa -->
        <!-- Champs pour les informations de la carte Visa -->
        <input type="text" name="card_number" placeholder="Numéro de carte"><br>
        <input type="text" name="expiry_date" placeholder="Date d'expiration"><br>
        <input type="text" name="cvv" placeholder="CVV"><br>
    </div>

    <div id="payment_form_paypal" style="display: none;">
        <!-- Formulaire de paiement Paypal -->
        <!-- Champs pour les informations de compte Paypal -->
        <input type="email" name="paypal_email" placeholder="Adresse email Paypal"><br>
        <input type="password" name="paypal_password" placeholder="Mot de passe Paypal"><br>
    </div>

    <div id="payment_form_sur_place" style="display: none;">
        <!-- Formulaire pour le paiement sur place -->
        <input type="text" name="comment" placeholder="(facultatif)"><br>
    </div>



    
    <tfoot>
        <tr>
            <td colspan="3">Total</td>
            <td>{{ total_price }} €</td>
        </tr>
    </tfoot>


    <button type="submit" class="btn btn-primary">Payer</button>
</form>

<script>
    // Afficher le formulaire de paiement correspondant à la méthode choisie
    document.querySelectorAll('input[type=radio][name=payment_method]').forEach(function(input) {
        input.addEventListener('change', function() {
            var method = this.value;
            document.querySelectorAll('[id^=payment_form_]').forEach(function(form) {
                if (form.id === 'payment_form_' + method.toLowerCase().replace(' ', '_')) {
                    form.style.display = 'block';
                } else {
                    form.style.display = 'none';
                }
            });
        });
    });
</script>
